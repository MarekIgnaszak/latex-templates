% Define colors ----------------------------------------------------------------
\usepackage{xcolor}

\definecolor{purple}{HTML}{695693}
\definecolor{cranberry}{HTML}{E64173}
\definecolor{orange}{HTML}{D65616}
\definecolor{navy}{HTML}{006896}
\definecolor{teal}{HTML}{1A505A}
\definecolor{ruby}{HTML}{9a2515}
\definecolor{alice}{HTML}{107895}
\definecolor{daisy}{HTML}{EBC944}
\definecolor{coral}{HTML}{F26D21}
\definecolor{kelly}{HTML}{829356}
\definecolor{slate900}{HTML}{131516}
\definecolor{asher}{HTML}{555F61}
\definecolor{slate}{HTML}{314F4F}

% Slate from Tailwind Colors
\definecolor{zinc50}{HTML}{fafafa}
\definecolor{zinc100}{HTML}{f4f4f5}
\definecolor{zinc200}{HTML}{e4e4e7}
\definecolor{zinc300}{HTML}{d4d4d8}
\definecolor{zinc400}{HTML}{a1a1aa}
\definecolor{zinc500}{HTML}{71717a}
\definecolor{zinc600}{HTML}{52525b}
\definecolor{zinc700}{HTML}{3f3f46}
\definecolor{zinc800}{HTML}{27272a}
\definecolor{zinc900}{HTML}{18181b}
\definecolor{zinc950}{HTML}{09090b}

% Easily color text
\newcommand\purple[1]{{\color{purple}#1}}
\newcommand\cranberry[1]{{\color{cranberry}#1}}
\newcommand\orange[1]{{\color{orange}#1}}
\newcommand\navy[1]{{\color{navy}#1}}
\newcommand\teal[1]{{\color{teal}#1}}
\newcommand\kelly[1]{{\color{kelly}#1}}
\newcommand\ruby[1]{{\color{ruby}#1}}
\newcommand\alice[1]{{\color{alice}#1}}
\newcommand\daisy[1]{{\color{daisy}#1}}
\newcommand\coral[1]{{\color{coral}#1}}

% Color background of text
\newcommand\bgNavy[1]{{\colorbox{navy!80!white}{#1}}}
\newcommand\bgOrange[1]{{\colorbox{orange!80!white}{#1}}}
\newcommand\bgTeal[1]{{\colorbox{teal!80!white}{#1}}}
\newcommand\bgPurple[1]{{\colorbox{purple!80!white}{#1}}}
\newcommand\bgKelly[1]{{\colorbox{kelly!80!white}{#1}}}
\newcommand\bgRuby[1]{{\colorbox{ruby!80!white}{#1}}}
\newcommand\bgAlice[1]{{\colorbox{alice!80!white}{#1}}}
\newcommand\bgDaisy[1]{{\colorbox{daisy!80!white}{#1}}}
\newcommand\bgCoral[1]{{\colorbox{coral!80!white}{#1}}}
\newcommand\bgCranberry[1]{{\colorbox{cranberry!80!white}{#1}}}

% Define `accent`/`accent2` colors for theme customization
% If accent/accent2 are not defined, then use defaults
\providecolor{accent}{HTML}{006896}
\providecolor{accent2}{HTML}{E64173}

% Fonts ------------------------------------------------------------------------
% Beamer Option to use custom fonts
\usefonttheme{professionalfonts}
\usepackage{inputenc}
% T1 removes errors for things like \textbackslash
\usepackage[T1]{fontenc}

\usepackage[sfdefault]{roboto}
% \usepackage{sourcesanspro}
% \usepackage{sourcecodepro}
% \usepackage[italic,eulergreek,symbolmisc]{mathastext}

% Small adjustments to text kerning
\usepackage{microtype}
\DisableLigatures[f]{encoding = *, family = *}

% Beamer Options ---------------------------------------------------------------

% Background
\setbeamercolor{background canvas}{bg = white}

% Change text margins
\setbeamersize{text margin left = 15pt, text margin right = 15pt} 

% \alert
\setbeamercolor{alerted text}{fg = accent2}

% Frame title
\setbeamercolor{frametitle}{bg = white, fg = zinc900}
\setbeamercolor{framesubtitle}{bg = white, fg = accent}
\setbeamerfont{framesubtitle}{size = \small, shape = \itshape}

% Page numbering
\setbeamercolor{page number in head/foot}{fg=zinc600}
\setbeamertemplate{footline}[frame number]

% Appendix numbering
\usepackage{appendixnumberbeamer}
\renewcommand\appendixname{Appendix}

% Table of Contents
\setbeamercolor{section in toc}{fg = zinc700}
\setbeamercolor{subsection in toc}{fg = zinc900}

% Button 
\setbeamercolor{button}{bg = accent, fg = white}
\setbeamerfont{button}{}
\setbeamercolor{button border}{fg = accent}

% Remove navigation symbols
\setbeamertemplate{navigation symbols}{}

% Table and Figure captions
\setbeamercolor{caption}{fg = zinc900!70!white}
\setbeamercolor{caption name}{fg=zinc900}
\setbeamerfont{caption name}{shape = \itshape}

% Line spacing
\usepackage{setspace}
\setstretch{1.3}

% Links
\usepackage{hyperref}
\hypersetup{
  colorlinks = true,
  linkcolor = accent2,
  filecolor = accent2,
  urlcolor = accent2,
  citecolor = accent2,
}

% Remove annoying over-full box warnings
\vfuzz2pt 
\hfuzz2pt


% Title page -------------------------------------------------------------------
\setbeamercolor{title}{fg = zinc900}
\setbeamercolor{subtitle}{fg = accent}

%% Custom \maketitle and \titlepage
\setbeamertemplate{title page}
{
  %\begin{centering}
  \vspace{20mm}
  {\Large \usebeamerfont{title}\usebeamercolor[fg]{title}\inserttitle}\\ \vskip0.25em%
  \ifx\insertsubtitle\@empty%
  \else%
    {\usebeamerfont{subtitle}\usebeamercolor[fg]{subtitle}\insertsubtitle\par}%
  \fi% 
  {\vspace{10mm}\insertauthor}\\
  {\color{asher}\small{\insertdate}}\\
  %\end{centering}
}

% Table of Contents with Sections ----------------------------------------------
\setbeamerfont{myTOC}{series=\bfseries, size=\Large}
\AtBeginSection[]{
  \begin{frame}{Roadmap}
    \tableofcontents[current]   
  \end{frame}
}

% Block ------------------------------------------------------------------------
\usepackage{tcolorbox}

\defbeamertemplate{block begin}{framed}[1][] {
  \begin{tcolorbox}[colback=zinc50, colframe=zinc200, arc=0mm]
  {
    \vskip\smallskipamount%
    \ifthenelse{\equal{\insertblocktitle}{}}{}{%
      \raggedright\usebeamerfont*{block title}\usebeamercolor[fg]{title}%
      \textbf{\insertblocktitle}%
      \vskip\medskipamount%
    }
  }%
  \raggedright%
  \usebeamerfont{block body}%
}
\defbeamertemplate{block end}{framed}[1][] {
  \vskip\smallskipamount\end{tcolorbox}
}
\setbeamertemplate{blocks}[framed]

% Colors from plugging base color into https://uicolors.app/create
\usepackage{ifthen}
\newenvironment*{zincBlock}[1]{%
  \begin{tcolorbox}[colback=zinc50, colframe=zinc200, arc=0mm]{
    \vskip\smallskipamount%
    \ifthenelse{\equal{#1}{}}{}{%
      \raggedright\usebeamerfont*{block title}\usebeamercolor[fg]{title}%
      \textbf{#1}%
      \vskip\medskipamount%
    }%
  }%
  \raggedright%
  \usebeamerfont{block body}%
}{%
  \vskip\smallskipamount\end{tcolorbox}
}

\definecolor{purple50}{HTML}{f9f8fc}
\definecolor{purple100}{HTML}{f1eff8}
\definecolor{purple200}{HTML}{e6e2f2}
\newenvironment*{purpleBlock}[1]{%
  \begin{tcolorbox}[colback=purple50, colframe=purple200, arc=0mm]{
    \vskip\smallskipamount%
    \ifthenelse{\equal{#1}{}}{}{%
      \raggedright\usebeamerfont*{block title}\usebeamercolor[fg]{title}%
      \textbf{#1}%
      \vskip\medskipamount%
    }%
  }%
  \raggedright%
  \usebeamerfont{block body}%
}{%
  \vskip\smallskipamount\end{tcolorbox}
}

\definecolor{cranberry50}{HTML}{fdf2f6}
\definecolor{cranberry100}{HTML}{fbe8ef}
\definecolor{cranberry200}{HTML}{fad0e0}
\newenvironment*{cranberryBlock}[1]{%
  \begin{tcolorbox}[colback=cranberry50, colframe=cranberry200, arc=0mm]{
    \vskip\smallskipamount%
    \raggedright\usebeamerfont*{block title}\usebeamercolor[fg]{title}%
    \textbf{#1}%
  }%
  \vskip\medskipamount%
  \raggedright%
  \usebeamerfont{block body}%
}{%
  \vskip\smallskipamount\end{tcolorbox}
}

% Bullet points ----------------------------------------------------------------

%% Fix left-margins
\settowidth{\leftmargini}{\usebeamertemplate{itemize item}}
\addtolength{\leftmargini}{\labelsep}

%% enumerate item color
\setbeamercolor{enumerate item}{fg = zinc600}
\setbeamerfont{enumerate item}{size = \small}
\setbeamertemplate{enumerate item}{\insertenumlabel.}

%% itemize
\setbeamercolor{itemize item}{fg = zinc600}
\setbeamerfont{itemize item}{size = \small}
\setbeamertemplate{itemize item}[circle]

%% right arrow for subitems
\setbeamercolor{itemize subitem}{fg = zinc600}
\setbeamerfont{itemize subitem}{size = \small}
\setbeamertemplate{itemize subitem}{$\rightarrow$}

\setbeamercolor{itemize subsubitem}{fg = zinc600}
\setbeamerfont{itemize subsubitem}{size = \small}
\setbeamertemplate{itemize subsubitem}[square]

% References -------------------------------------------------------------------

% biblatex 
\usepackage[
  natbib = true, 
  backend = biber,
  citestyle= authoryear,
  style = ext-authoryear-ecomp,
  url = false,
]{biblatex}

% Smaller font-size for references
\renewcommand*{\bibfont}{\small}

% % Remove "In:"
\renewbibmacro{in:}{}

% Color citations for slides \citecolor{}
\newcommand{\citecolor}[1]{%
  {\footnotesize\begin{color}{zinc500}%
    #1%
  \end{color}}%
}

% Bibliography Font, roughly matching AEA
\setbeamertemplate{bibliography item}{}

\setbeamerfont{bibliography entry author}{size = \footnotesize, series = \bfseries}
\setbeamercolor{bibliography entry author}{fg = accent!60!zinc900}

\setbeamerfont{bibliography entry title}{size = \footnotesize, series = \mdseries}
\setbeamercolor{bibliography entry title}{fg = zinc900}

\setbeamerfont{bibliography entry location}{size = \footnotesize, shape = \itshape, series = \mdseries}
\setbeamercolor{bibliography entry location}{fg = zinc900}

\setbeamerfont{bibliography entry note}{size = \footnotesize, series = \mdseries}
\setbeamercolor{bibliography entry note}{fg = zinc900}



% \begin{columns} --------------------------------------------------------------
\usepackage{multicol}

% Tables -----------------------------------------------------------------------

% When tables are too big, use adjustbox
% \begin{adjustbox}{width = 1\textwidth, center}
\usepackage{adjustbox}
\usepackage{array}
\usepackage{threeparttable}
\usepackage{booktabs}
    
% Fix \input with tables
% \input fails when \\ is at end of external .tex file
\makeatletter
\let\input\@@input
\makeatother

% Tables too narrow
% \begin{tabularx}{\linewidth}{cols}
% col-types: X - center, L - left, R -right
% Relative scale: >{\hsize=.8\hsize}X/L/R
\usepackage{tabularx}
\newcolumntype{L}{>{\raggedright\arraybackslash}X}
\newcolumntype{R}{>{\raggedleft\arraybackslash}X}
\newcolumntype{C}{>{\centering\arraybackslash}X}

% Table Highlighting -----------------------------------------------------------
% Create top-left and bottom-right markets in tabular cells with a unique matching id and these commands will outline those cells
\usepackage[beamer,customcolors]{hf-tikz}
\usetikzlibrary{calc}
\usetikzlibrary{fit,shapes.misc}

% To set the hypothesis highlighting boxes red.
\newcommand\marktopleft[1]{%
    \tikz[overlay,remember picture] 
        \node (marker-#1-a) at (0,1.5ex) {};%
}
\newcommand\markbottomright[1]{%
    \tikz[overlay,remember picture] 
        \node (marker-#1-b) at (0,0) {};%
    \tikz[accent!80!zinc900, ultra thick, overlay, remember picture, inner sep=4pt]
        \node[draw, rectangle, fit=(marker-#1-a.center) (marker-#1-b.center)] {};%
}

% Figures ----------------------------------------------------------------------

% \imageframe{img_name}
% from https://github.com/mattzinc900well/cousteau
\newcommand{\imageframe}[1]{%
    \begin{frame}[plain]
        \begin{tikzpicture}[remember picture, overlay]
            \node[at = (current page.center), xshift = 0cm] (cover) {%
                \includegraphics[keepaspectratio, width=\paperwidth, height=\paperheight]{#1}
            };
        \end{tikzpicture}
    \end{frame}%
}

% subfigures
\usepackage{subfigure}

% Highlight slide --------------------------------------------------------------
% \begin{transitionframe} Text \end{transitionframe}
% from paulgp's beamer tips
\newenvironment{transitionframe}{
    \setbeamercolor{background canvas}{bg=accent!60!black}
    \begin{frame}[c]\color{white}\LARGE\centering
}{
    \end{frame}
}


% Math stuff -------------------------------------------------------------------
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amsthm}
\usepackage{graphicx}
\usepackage{bm}

% Custom Math Definitions ------------------------------------------------------
\newcommand{\expec}[1]{\mathbb{E}\left[#1\right]}%
\newcommand{\condexpec}[2]{\mathbb{E}\left[#1 \ \vert \ #2\right]}%
\newcommand{\prob}[1]{\text{Pr}\left[#1\right]}%
\newcommand{\condprob}[2]{\text{Pr}\left[#1 \ \vert \ #2\right]}%
\newcommand{\var}[1]{\mathrm{Var}\left[#1\right]}%
\newcommand{\cov}[1]{\mathrm{Cov}\left[#1\right]}%
\newcommand{\one}{\mathbf{1}}
